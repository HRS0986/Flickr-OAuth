import { HttpClient } from '@angular/common/http';
import { Component } from '@angular/core';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css'],
})
export class AppComponent {
  consumerKey: string = '5c84553c9aaf584c321d06f04261d37d';
  consumerSecret: string = 'dd63e40db50ae679';
  oauthToken: string = '';
  oauthTokenSecret: string = '';
  oauthVerifier: string = '';

  constructor( 
    private http: HttpClient,

    ) {}

  getData() {
    console.log('Getting Data');
    this.http
      .get('http://localhost:3000/request')
      .toPromise()
      .then((data: any) => {
        const width = +window.innerWidth - 100;
        const height = +window.innerHeight - 100;
        console.log(data);
        window.location.href = data.data;
	var interval =  setInterval(() => {
	  console.log('OK');
	  if (window.location.href.search('verifier') !== -1) {
	    const URL = window.location.href;
	    console.log('URL', URL);
	    clearInterval(interval);
	  }
	}, 1000);
      })
      .catch((err) => console.log(err));   
  }
}
